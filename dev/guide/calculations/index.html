<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Calculations · DFControl.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://louisponet.github.io/DFControl.jl/stable/guide/calculations/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DFControl.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../configuration/">Configuration</a></li><li><a class="tocitem" href="../basic_tutorial/">Basic Tutorial</a></li><li><a class="tocitem" href="../advanced_tutorial/">Advanced Tutorial</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../jobs/">Jobs</a></li><li class="is-active"><a class="tocitem" href>Calculations</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Basic-interaction"><span>Basic interaction</span></a></li><li><a class="tocitem" href="#Flags"><span>Flags</span></a></li><li><a class="tocitem" href="#Execs"><span>Execs</span></a></li><li><a class="tocitem" href="#calculation_generation"><span>Generating new calculations</span></a></li></ul></li><li><a class="tocitem" href="../structure/">Structure</a></li></ul></li><li><a class="tocitem" href="../../api/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li class="is-active"><a href>Calculations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Calculations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/louisponet/DFControl.jl/blob/master/docs/src/guide/calculations.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Calculations"><a class="docs-heading-anchor" href="#Calculations">Calculations</a><a id="Calculations-1"></a><a class="docs-heading-anchor-permalink" href="#Calculations" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Calculations">Calculations</a></li><ul><li><a href="#Contents">Contents</a></li><li><a href="#Index">Index</a></li><li><a href="#Basic-interaction">Basic interaction</a></li><li><a href="#Flags">Flags</a></li><li><a href="#Execs">Execs</a></li><li><a href="#calculation_generation">Generating new calculations</a></li></ul></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#DFControl.Calculations.Calculation"><code>DFControl.Calculations.Calculation</code></a></li><li><a href="#DFControl.Calculations.Exec"><code>DFControl.Calculations.Exec</code></a></li><li><a href="#DFControl.Calculations.InputData"><code>DFControl.Calculations.InputData</code></a></li><li><a href="#Base.getindex-Tuple{Calculation, Symbol}"><code>Base.getindex</code></a></li><li><a href="#Base.setindex!-Tuple{Calculation, Symbol, Any}"><code>Base.setindex!</code></a></li><li><a href="#DFControl.Calculations.data"><code>DFControl.Calculations.data</code></a></li><li><a href="#DFControl.Calculations.gencalc_bands-Tuple{Calculation{QE}, Vector{&lt;:NTuple{4, T} where T}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_bands</code></a></li><li><a href="#DFControl.Calculations.gencalc_nscf-Tuple{Calculation{QE}, Tuple{Int64, Int64, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_nscf</code></a></li><li><a href="#DFControl.Calculations.gencalc_projwfc-Tuple{Calculation{QE}, Real, Real, Real}"><code>DFControl.Calculations.gencalc_projwfc</code></a></li><li><a href="#DFControl.Calculations.gencalc_scf-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_scf</code></a></li><li><a href="#DFControl.Calculations.gencalc_vcrelax-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_vcrelax</code></a></li><li><a href="#DFControl.Calculations.gencalc_wan"><code>DFControl.Calculations.gencalc_wan</code></a></li><li><a href="#DFControl.Calculations.set_flags!"><code>DFControl.Calculations.set_flags!</code></a></li><li><a href="#DFControl.Calculations.set_kpoints!"><code>DFControl.Calculations.set_kpoints!</code></a></li><li><a href="#DFControl.Calculations.set_name!"><code>DFControl.Calculations.set_name!</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.Calculation" href="#DFControl.Calculations.Calculation"><code>DFControl.Calculations.Calculation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Calculation{P&lt;:Package}(name    ::String;
                        flags   ::AbstractDict = Dict{Symbol, Any}(),
                        data    ::Vector{InputData} = InputData[],
                        exec    ::Exec,
                        run     ::Bool = true,
                        infile  ::String = P == Wannier90 ? name * &quot;.win&quot; : name * &quot;.in&quot;,
                        outfile ::String = name * &quot;.out&quot;)</code></pre><p>The representation of a <em>DFT</em> calculation of package <code>P</code>, holding the <code>flags</code> that will be written to the <code>infile</code>, the executable <code>exec</code> and the output written by the calculation to the <code>outfile</code>. It essentially represents a line in a job script similar to <code>exec &lt; infile.in &gt; outfile.out</code>.  <code>outdata</code> stores the parsed calculation output after it was read at least once. The <code>run</code> field indicates whether the calculation should be actually performed, e.g. if <code>run=false</code> the corresponding line will be commented out in the job script.</p><pre><code class="nohighlight">Calculation{P&lt;:Package}(name::AbstractString, flags::Pair{Symbol, Any}...; kwargs...)</code></pre><p>Create a <a href="#DFControl.Calculations.Calculation"><code>Calculation</code></a> from <code>name</code> and <code>flags</code>, other <code>kwargs...</code> will be passed to the constructor.</p><pre><code class="nohighlight">Calculation(template::Calculation, name::AbstractString, flags::Pair{Symbol, Any}...; excs=deepcopy(template.exec), run=true, data=nothing)</code></pre><p>Creates a new <a href="#DFControl.Calculations.Calculation"><code>Calculation</code></a> from the <code>template</code>, setting the <code>flags</code> of the newly created one to the specified ones.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L28-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.InputData" href="#DFControl.Calculations.InputData"><code>DFControl.Calculations.InputData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">InputData(name::Symbol, option::Symbol, data::Any)</code></pre><p>Represents a more structured block of input data. e.g. <code>InputData(:k_points, :automatic, (6,6,6,1,1,1))</code> would be translated for a QE calculation into</p><pre><code class="nohighlight">K_POINTS(automatic)
6 6 6 1 1 1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L1-L11">source</a></section></article><h2 id="Basic-interaction"><a class="docs-heading-anchor" href="#Basic-interaction">Basic interaction</a><a id="Basic-interaction-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-interaction" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.set_name!" href="#DFControl.Calculations.set_name!"><code>DFControl.Calculations.set_name!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_name!(c::Calculation, name::AbstractString)</code></pre><p>Sets <code>calculation.name</code>, and <code>calculation.infile</code> and <code>calculation.outfile</code> to conform with the new <code>name</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L124-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.data" href="#DFControl.Calculations.data"><code>DFControl.Calculations.data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">data(calculation::Calculation, n::Symbol)</code></pre><p>The former returns <code>calculation.data</code>, the later – the <code>InputData</code> with name <code>n</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L138-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.set_kpoints!" href="#DFControl.Calculations.set_kpoints!"><code>DFControl.Calculations.set_kpoints!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_kpoints!(calculation::Calculation{QE}, k_grid::NTuple{3, Int}; print=true)
set_kpoints!(calculation::Calculation{QE}, k_grid::NTuple{6, Int}; print=true)
set_kpoints!(calculation::Calculation{QE}, k_grid::Vector{&lt;:NTuple{4}}; print=true, k_option=:crystal_b)</code></pre><p>Convenience function to set the <code>:k_points</code> data block of <code>calculation</code>. The three different methods are targeted at <code>nscf</code>, <code>scf</code> or <code>vcrelax</code>, and <code>bands</code> calculations, respectively. For the <code>nscf</code> version an explicit list of <code>k_points</code> will be generated.</p><pre><code class="nohighlight">set_kpoints!(calculation::Calculation{Wannier90}, k_grid::NTuple{3, Int})</code></pre><p>Similar to the <code>nscf</code> targeted function in the sense that it will generate an explicit list of <code>k_points</code>, adhering to the same rules as for the <code>nscf</code>. The <code>mp_grid</code> flag will also automatically be set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L285-L300">source</a></section></article><h2 id="Flags"><a class="docs-heading-anchor" href="#Flags">Flags</a><a id="Flags-1"></a><a class="docs-heading-anchor-permalink" href="#Flags" title="Permalink"></a></h2><p>A big part of working with DFT calculations is specifying the various calculation flags. Remembering all the names of the flags, where they belong, and what types they are expected to be, is quite complicated and can lead to easily made mistakes like typos. <code>DFControl</code> tries to catch these as it knows which flags are allowed for which calculations. It will report when a flag can not be found for a given <a href="#Calculations"><code>Calculation</code></a>, and it will also try to convert a flag value to the expected type.</p><p>A <a href="#DFControl.Calculations.Calculation"><code>Calculation</code></a> behaves a lot as a normal <code>Dict</code> to interact with the stored flags. This means that the usual <code>Dict</code> operations such as <code>haskey</code>, <code>get</code>, and <code>pop!</code> work on a <a href="#DFControl.Calculations.Calculation"><code>Calculation</code></a>.</p><article class="docstring"><header><a class="docstring-binding" id="Base.getindex-Tuple{Calculation, Symbol}" href="#Base.getindex-Tuple{Calculation, Symbol}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">getindex(c::Calculation, n::Symbol)</code></pre><p>Returns the flag with given symbol.</p><pre><code class="nohighlight">getindex(job::Job, flag::Symbol)</code></pre><p>Searches through the job&#39;s calculations for the requested flag. A <code>Dict</code> will be returned with calculation names as the keys and the flags as values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L156-L165">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.setindex!-Tuple{Calculation, Symbol, Any}" href="#Base.setindex!-Tuple{Calculation, Symbol, Any}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">setindex!(c::Calculation, value, flag::Symbol)</code></pre><p>Sets flags.</p><pre><code class="nohighlight">setindex!(job::Job, value, flag::Symbol)</code></pre><p>Set <code>flag</code> in all the appropriate calculations to the <code>value</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L175-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.set_flags!" href="#DFControl.Calculations.set_flags!"><code>DFControl.Calculations.set_flags!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_flags!(c::Calculation, flags::Pair{Symbol, Any}...; print=true)</code></pre><p>Sets multiple flags in one go. Flag validity and type are verified.</p><pre><code class="nohighlight">set_flags!(job::Job, calculations::Vector{&lt;:Calculation}, flags::Pair{Symbol,&lt;:Any}...; print=true)
set_flags!(job::Job, flags::Pair{Symbol,&lt;:Any}...; print=true)</code></pre><p>Sets the flags in the names to the flags specified. This only happens if the specified flags are valid for the names.</p><p>The values that are supplied will be checked whether they are valid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/calculation.jl#L186-L198">source</a></section></article><h2 id="Execs"><a class="docs-heading-anchor" href="#Execs">Execs</a><a id="Execs-1"></a><a class="docs-heading-anchor-permalink" href="#Execs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.Exec" href="#DFControl.Calculations.Exec"><code>DFControl.Calculations.Exec</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Exec(;exec::String = &quot;&quot;, dir::String = &quot;&quot;, flags::Vector{ExecFlag} = ExecFlag[])</code></pre><p>Representation of an <code>executable</code> that will run the <a href="#DFControl.Calculations.Calculation"><code>Calculation</code></a>. Basically <code>dir/exec --&lt;flags&gt;</code> inside a job script.</p><pre><code class="nohighlight">Exec(exec::String, dir::String, flags::Pair{Symbol}...)</code></pre><p>Will first transform <code>flags</code> into a <code>Vector{ExecFlag}</code>, and construct the <a href="#DFControl.Calculations.Exec"><code>Exec</code></a>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/execs.jl#L24-L33">source</a></section></article><h2 id="calculation_generation"><a class="docs-heading-anchor" href="#calculation_generation">Generating new calculations</a><a id="calculation_generation-1"></a><a class="docs-heading-anchor-permalink" href="#calculation_generation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_vcrelax-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}" href="#DFControl.Calculations.gencalc_vcrelax-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_vcrelax</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gencalc_vcrelax(template::Calculation{QE}, kpoints::NTuple{6, Int}, newflags...; name=&quot;scf&quot;)</code></pre><p>Uses the information from the template and supplied <code>kpoints</code> to generate a vcrelax calculation. Extra flags can be supplied which will be set for the generated calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/qe.jl#L278-L283">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_scf-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}" href="#DFControl.Calculations.gencalc_scf-Tuple{Calculation{QE}, NTuple{6, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_scf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gencalc_scf(template::Calculation{QE}, kpoints::NTuple{6, Int}, newflags...; name=&quot;scf&quot;)</code></pre><p>Uses the information from the template and <code>supplied</code> kpoints to generate an scf calculation. Extra flags can be supplied which will be set for the generated calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/qe.jl#L266-L271">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_bands-Tuple{Calculation{QE}, Vector{&lt;:NTuple{4, T} where T}, Vararg{Any}}" href="#DFControl.Calculations.gencalc_bands-Tuple{Calculation{QE}, Vector{&lt;:NTuple{4, T} where T}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_bands</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gencalc_bands(template::Calculation{QE}, kpoints::Vector{NTuple{4}}, newflags...; name=&quot;bands&quot;)</code></pre><p>Uses the information from the template and supplied <code>kpoints</code> to generate a bands calculation. Extra flags can be supplied which will be set for the generated calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/qe.jl#L290-L295">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_nscf-Tuple{Calculation{QE}, Tuple{Int64, Int64, Int64}, Vararg{Any}}" href="#DFControl.Calculations.gencalc_nscf-Tuple{Calculation{QE}, Tuple{Int64, Int64, Int64}, Vararg{Any}}"><code>DFControl.Calculations.gencalc_nscf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gencalc_nscf(template::Calculation{QE}, kpoints::NTuple{3, Int}, newflags...; name=&quot;nscf&quot;)</code></pre><p>Uses the information from the template and supplied <code>kpoints</code> to generate an nscf calculation. Extra flags can be supplied which will be set for the generated calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/qe.jl#L302-L307">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_projwfc-Tuple{Calculation{QE}, Real, Real, Real}" href="#DFControl.Calculations.gencalc_projwfc-Tuple{Calculation{QE}, Real, Real, Real}"><code>DFControl.Calculations.gencalc_projwfc</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gencalc_projwfc(template::Calculation{QE}, Emin, Emax, DeltaE, newflags...; name=&quot;projwfc&quot;)</code></pre><p>Uses the information from the template and supplied <code>kpoints</code> to generate a <code>projwfc.x</code> calculation. Extra flags can be supplied which will be set for the generated calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/qe.jl#L314-L319">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DFControl.Calculations.gencalc_wan" href="#DFControl.Calculations.gencalc_wan"><code>DFControl.Calculations.gencalc_wan</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">gencalc_wan(nscf::Calculation{QE}, structure::Structure, Emin, wanflags...;
            Epad     = 5.0,
            wanexec  = Exec(exec=&quot;wannier90.x&quot;, dir=&quot;&quot;))</code></pre><p>Generates a Wannier90 calculation to follow on the supplied <code>nscf</code> calculation. It uses the projections defined in the <code>structure</code>, and starts counting the required amount of bands from <code>Emin</code>. The <code>nscf</code> needs to have a valid output since it will be used in conjunction with <code>Emin</code> to find the required amount of bands and energy window for the Wannier90 calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Calculations/wannier.jl#L7-L14">source</a></section><section><div><pre><code class="nohighlight">gencalc_wan(job::Job, min_window_determinator::Real, extra_wan_flags...; kwargs...)</code></pre><p>Automates the generation of wannier calculations based on the <code>job</code>. When a projwfc calculation is present in the <code>job</code>, <code>min_window_determinator</code> will be used to determine the threshold value for including a band in the window based on the projections, otherwise it will be used as the <code>Emin</code> value from which to start counting the number of bands needed for all projections. <code>extra_wan_flags</code> can be any extra flags for the Wannier90 calculation such as <code>write_hr</code> etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/louisponet/DFControl.jl/blob/9e126ad83b0799545f0e5db152044818732f4d9d/src/Jobs/job.jl#L196-L205">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../jobs/">« Jobs</a><a class="docs-footer-nextpage" href="../structure/">Structure »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Tuesday 1 February 2022 20:41">Tuesday 1 February 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
